<?xml version="1.0"?>
<openerp>
    <data noupdate="0">

<!--
 Users Groups
-->
    <record model="res.groups" id="group_system">
        <field name="name">Administration / Configuration</field>
    </record>

    <record model="res.groups" id="group_erp_manager">
        <field name="name">Administration / Access Rights</field>
    </record>

    <record model="res.groups" id="group_records_merge">
        <field name="name">Administration / Merge Records</field>
	<field name="comment">Members of this group are allowed to merge records.
		Since this is an advanced operation (may create side-effects), this
		special permission is needed.
	</field>
    </record>

    <record model="res.groups" id="group_user">
        <field name="name">Employee</field>
    </record>

    <record model="res.groups" context="{'noadmin':True}" id="group_multi_company">
        <field name="name">Useability / Multi Companies</field>
    </record>

    <record model="res.groups" context="{'noadmin':True}" id="group_extended">
        <field name="name">Useability / Extended View</field>
    </record>

    <record model="res.groups" id="group_no_one" context="{'noadmin':True}">
        <field name="name">Useability / No One</field>
    </record>

    <record id="group_sale_manager" model="res.groups">
        <field name="name">Sales / Manager</field>
    </record>
    <record id="group_sale_salesman" model="res.groups">
        <field name="name">Sales / User</field>
    </record>
    <!-- Set accesses to menu -->
    <record model="ir.ui.menu" id="base.menu_administration">
        <field name="groups_id" eval="[(6,0, [ref('group_system'), ref('group_erp_manager')])]"/>
    </record>

    <record model="ir.rule" id="res_widget_user_rule">
        <field name="name">res.widget.user rule</field>
        <field name="model_id" ref="model_res_widget_user"/>
        <field name="domain_force">['|', ('user_id','=',user.id),('user_id','=',False)]</field>
    </record>

    <record model="ir.rule" id="res_partner_rule">
        <field name="name">res.partner company</field>
        <field name="model_id" ref="model_res_partner"/>
        <!-- Show partners from ancestors and descendants companies (or company-less), this is usually a better
             default for multicompany setups. -->
        <field name="domain_force">['|','|',('company_id.child_ids','child_of',[user.company_id.id]),('company_id','child_of',[user.company_id.id]),('company_id','=',False)]</field>
    </record>

    <record model="ir.rule" id="multi_company_default_rule">
        <field name="name">Multi_company_default company</field>
        <field name="model_id" ref="model_multi_company_default"/>
        <field name="domain_force">[('company_id','child_of',[user.company_id.id])]</field>
    </record>
    
    <!-- Used for dashboard customizations, users should only be able to edit their own dashboards -->
        <record model="ir.rule" id="ir_ui_view_custom_personal">
            <field name="name">ir.ui.view_custom rule</field>
            <field name="model_id" ref="model_ir_ui_view_custom"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
        </record>

        <record model="ir.rule" id="rule_ir_model_data_merge">
            <field name="name">ir.model.data Merge</field>
            <field name="model_id" ref="model_ir_model_data"/>
            <field name="domain_force">[('source','=','merged')]</field>
            <field name="perm_read" eval="False" />
                <!-- we skip the Read permission, which is True for everybody,
                     since we don't want to slow down all read operations
                     on ir.model.data -->
            <field name="groups" eval="[(6,0,[ref(group_records_merge)])]" />
        </record>

    </data>
</openerp>

